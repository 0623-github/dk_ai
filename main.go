// Code generated by hertz generator.

package main

import (
	"context"

	"github.com/0623-github/dk_ai/biz/handler"
	"github.com/0623-github/dk_ai/biz/wrapper"
	"github.com/cloudwego/hertz/pkg/app"
	"github.com/cloudwego/hertz/pkg/app/server"
	"github.com/hertz-contrib/cors"
)

func main() {
	h := server.New(server.WithHostPorts("0.0.0.0:9090"))

	h.Use(cors.New(cors.Config{
		AllowOrigins:     []string{"*"},
		AllowMethods:     []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},
		AllowHeaders:     []string{"Origin", "Content-Type", "Accept", "Authorization"},
		ExposeHeaders:    []string{"Content-Length"},
		AllowCredentials: true,
	}))

	h.StaticFile("/", "fe/index.html")
	h.StaticFS("/static", &app.FS{
		Root: "fe",
	})

	w := wrapper.NewImpl(context.Background())
	h2 := &handler.Handler{Wrapper: w}
	register(h, h2)
	h.Spin()
}
